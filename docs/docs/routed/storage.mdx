---
title: Storage
description: Configure storage disks for static assets, views, and uploads
sidebar_position: 21
---

# Storage

Storage disks provide the shared file abstraction for uploads, static mounts, and views. Configure disks once under `storage.*`, then reference them in `static.mounts`, `view.disk`, or upload handlers.

## Configuration

```yaml title="config/storage.yaml"
storage:
  default: local
  # Base used by storage helpers (cache/session/storage_path).
  base: "{{ env.APP_ROOT }}/storage"
  # Root used for the default local disk when not overridden.
  root: storage/app
  disks:
    local:
      driver: local
      root: storage/app
    assets:
      driver: local
      root: public
    backups:
      driver: s3
      options:
        endpoint: https://s3.amazonaws.com
        bucket: my-app-assets
        key: ${S3_KEY}
        secret: ${S3_SECRET}
        region: us-east-1
```

## Driver options

- **Local**: `root`, optional `file_system` (programmatic only).
- **S3/Cloud**: `endpoint`, `bucket`, `key`, `secret`, `region`, optional `prefix`, `visibility`, `url`, `throw`, `report`, `directory_separator`.

## Storage base vs disk roots

- `storage.base` anchors helper paths like `storage_path()` and framework cache/session storage.
- `storage.root` only seeds the default local disk if `storage.disks.local.root` is missing.
- When `app.root` is available, relative storage paths resolve against it.

## Helper paths

Use the `StorageDefaults` helper to build framework paths when you need absolute locations:

```dart
final defaults = await engine.make<StorageDefaults>();
final cachePath = defaults.frameworkPath('cache');
```

## StorageManager usage

```dart
final storage = await engine.make<StorageManager>();
final logoPath = storage.resolve('logo.png', disk: 'assets');
```

## Next steps

- [Configuration: Storage](/docs/routed/fundamentals/configuration#storage-disks)
- [Views & Templates](/docs/routed/views/)
- [Static Assets](/docs/routed/static-assets)
