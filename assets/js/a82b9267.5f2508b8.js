"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[6264],{4585:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"examples/project-commands","title":"Project CLI Commands","description":"Use lib/commands.dart to register project-specific routed commands","source":"@site/docs/routed/examples/project-commands.mdx","sourceDirName":"examples","slug":"/examples/project-commands","permalink":"/docs/routed/examples/project-commands","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/examples/project-commands.mdx","tags":[],"version":"current","sidebarPosition":40,"frontMatter":{"title":"Project CLI Commands","description":"Use lib/commands.dart to register project-specific routed commands","sidebar_position":40},"sidebar":"routedSidebar","previous":{"title":"SSE counter stream","permalink":"/docs/routed/examples/sse-counter"},"next":{"title":"Static Assets","permalink":"/docs/routed/static-assets"}}');var r=t(4848),s=t(8453);const a={title:"Project CLI Commands",description:"Use lib/commands.dart to register project-specific routed commands",sidebar_position:40},d="Project CLI Commands",i={},c=[{value:"Example",id:"example",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"project-cli-commands",children:"Project CLI Commands"})}),"\n",(0,r.jsxs)(n.p,{children:["Routed projects can expose bespoke CLI automation by implementing\n",(0,r.jsx)(n.code,{children:"buildProjectCommands()"})," in ",(0,r.jsx)(n.code,{children:"lib/commands.dart"}),". Each scaffolded application now\nincludes this entrypoint\u2014return one or more ",(0,r.jsx)(n.code,{children:"Command<void>"})," instances and the\nRouted CLI will load them automatically when you run commands inside the\nproject."]}),"\n",(0,r.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"https://github.com/routed-dev/routed/tree/main/examples/project_commands_demo",children:(0,r.jsx)(n.code,{children:"project_commands_demo"})}),"\nexample bundles two commands:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"demo:greet"})," \u2013 prints a configurable greeting and demonstrates reading options\nfrom ",(0,r.jsx)(n.code,{children:"argParser"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"routes:dump"})," \u2013 boots the application, builds the route manifest, and writes\nit to ",(0,r.jsx)(n.code,{children:"build/routes.json"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'cd examples/project_commands_demo\ndart pub get\n\n# List built-in + project commands\ndart run routed --help\n\n# Run a project command\ndart run routed demo:greet --name "Routed fan"\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"lib/commands.dart"})," exports a function similar to:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",metastring:'title="lib/commands.dart"',children:"import 'dart:async';\nimport 'dart:convert';\nimport 'dart:io';\n\nimport 'package:args/command_runner.dart';\nimport 'package:routed/routed.dart';\n\nimport 'app.dart' as app;\n\nclass RoutesDumpCommand extends Command<void> {\n  RoutesDumpCommand() {\n    argParser\n      ..addOption('output', defaultsTo: 'build/routes.json')\n      ..addFlag('pretty', defaultsTo: true);\n  }\n\n  @override\n  String get name => 'routes:dump';\n\n  @override\n  String get description => 'Write the current route manifest to JSON.';\n\n  @override\n  Future<void> run() async {\n    final engine = await app.createEngine();\n    final manifest = engine.buildRouteManifest();\n    await engine.close();\n\n    final target = argResults?.option('output') ?? 'build/routes.json';\n    final encoder = (argResults?.flag('pretty') ?? true)\n        ? const JsonEncoder.withIndent('  ')\n        : const JsonEncoder();\n\n    final file = File(target)..parent.createSync(recursive: true);\n    file.writeAsStringSync(encoder.convert(manifest.toJson()));\n  }\n}\n\nFutureOr<List<Command<void>>> buildProjectCommands() => [RoutesDumpCommand()];\n"})}),"\n",(0,r.jsxs)(n.p,{children:['When you add commands, the CLI groups them under a "Project" heading in\n',(0,r.jsx)(n.code,{children:"dart run routed --help"}),". If a project command reuses a built-in name the CLI\nexits with a conflict so you can rename it."]}),"\n",(0,r.jsxs)(n.p,{children:["Use this hook for queue workers, database seeders, or custom diagnostics without\nforking ",(0,r.jsx)(n.code,{children:"routed"}),"."]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var o=t(6540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);