"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[2079],{8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>d});var i=n(6540);const t={},s=i.createContext(t);function a(e){const r=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:r},e.children)}},9848:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"index","title":"Inertia Dart","description":"Server-side Inertia.js protocol for Dart with property helpers, SSR, and dart:io support","source":"@site/docs/inertia_dart/index.mdx","sourceDirName":".","slug":"/","permalink":"/docs/inertia_dart/","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/inertia_dart/index.mdx","tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"title":"Inertia Dart","description":"Server-side Inertia.js protocol for Dart with property helpers, SSR, and dart:io support","sidebar_position":0},"sidebar":"inertiaDartSidebar","next":{"title":"Tutorial: Build a Contacts App","permalink":"/docs/inertia_dart/tutorial"}}');var t=n(4848),s=n(8453);const a={title:"Inertia Dart",description:"Server-side Inertia.js protocol for Dart with property helpers, SSR, and dart:io support",sidebar_position:0},d="Inertia Dart",l={},c=[{value:"Features",id:"features",level:2},{value:"Install",id:"install",level:2},{value:"CLI",id:"cli",level:2},{value:"Quick start",id:"quick-start",level:2},{value:"Props",id:"props",level:2},{value:"Partial reloads",id:"partial-reloads",level:2},{value:"Vite asset helper",id:"vite-asset-helper",level:2},{value:"Asset manifest helper",id:"asset-manifest-helper",level:2},{value:"SSR",id:"ssr",level:2},{value:"History flags",id:"history-flags",level:2},{value:"Middleware",id:"middleware",level:2},{value:"Testing",id:"testing",level:2},{value:"Vite hot file plugin",id:"vite-hot-file-plugin",level:2},{value:"Example apps",id:"example-apps",level:2},{value:"Learn more",id:"learn-more",level:2}];function o(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"inertia-dart",children:"Inertia Dart"})}),"\n",(0,t.jsxs)(r.p,{children:["Build single-page apps without building an API. ",(0,t.jsx)(r.code,{children:"inertia_dart"})," implements the\nserver-side Inertia protocol for Dart and provides property helpers, SSR\nsupport, asset manifest reading, and testing utilities. Pair it with a client\nadapter like ",(0,t.jsx)(r.code,{children:"@inertiajs/react"}),", ",(0,t.jsx)(r.code,{children:"@inertiajs/vue3"}),", or ",(0,t.jsx)(r.code,{children:"@inertiajs/svelte"}),"."]}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Want a hands-on walkthrough?"})," Follow the ",(0,t.jsx)(r.a,{href:"/docs/inertia_dart/tutorial",children:"Build a Contacts App"})," tutorial using just ",(0,t.jsx)(r.code,{children:"dart:io"})," -- no framework required."]}),"\n"]}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Using the Routed framework?"})," See ",(0,t.jsx)(r.a,{href:"/docs/routed_inertia/",children:"Routed Inertia"})," for the framework integration, or the ",(0,t.jsx)(r.a,{href:"/docs/routed_inertia/tutorial",children:"Todo App tutorial"})," for a guided build."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Full Inertia protocol: JSON responses for XHR visits, HTML for initial page loads"}),"\n",(0,t.jsxs)(r.li,{children:["Property helpers: ",(0,t.jsx)(r.code,{children:"AlwaysProp"}),", ",(0,t.jsx)(r.code,{children:"LazyProp"}),", ",(0,t.jsx)(r.code,{children:"OptionalProp"}),", ",(0,t.jsx)(r.code,{children:"DeferredProp"}),", ",(0,t.jsx)(r.code,{children:"MergeProp"}),", ",(0,t.jsx)(r.code,{children:"OnceProp"}),", ",(0,t.jsx)(r.code,{children:"ScrollProp"})]}),"\n",(0,t.jsx)(r.li,{children:"Partial reloads, deferred groups, merge strategies, infinite scroll metadata"}),"\n",(0,t.jsx)(r.li,{children:"Vite manifest reader and dev server hot file bridge"}),"\n",(0,t.jsx)(r.li,{children:"SSR gateway for server-side rendering with Node.js"}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"dart:io"})," helpers: ",(0,t.jsx)(r.code,{children:"inertiaRequestFromHttp()"})," and ",(0,t.jsx)(r.code,{children:"writeInertiaResponse()"})]}),"\n",(0,t.jsx)(r.li,{children:"CLI for scaffolding Vite + Inertia client apps"}),"\n",(0,t.jsxs)(r.li,{children:["Testing utilities with ",(0,t.jsx)(r.code,{children:"AssertableInertia"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"install",children:"Install"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart pub add inertia_dart\n"})}),"\n",(0,t.jsx)(r.h2,{id:"cli",children:"CLI"}),"\n",(0,t.jsx)(r.p,{children:"Scaffold a Vite client with Inertia already wired:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run inertia_dart:inertia create my-app --framework react\n"})}),"\n",(0,t.jsx)(r.p,{children:"Install Inertia into an existing Vite project:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run inertia_dart:inertia install --framework react --path ./client\n"})}),"\n",(0,t.jsx)(r.h2,{id:"quick-start",children:"Quick start"}),"\n",(0,t.jsxs)(r.p,{children:["The core flow for a standalone ",(0,t.jsx)(r.code,{children:"dart:io"})," server:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"import 'package:inertia_dart/inertia_dart.dart';\n\n// 1. Parse the incoming HTTP request\nfinal request = inertiaRequestFromHttp(httpRequest);\n\n// 2. Build a property resolution context from the request headers\nfinal context = request.createContext();\n\n// 3. Resolve props and build the Inertia page object\nfinal page = await InertiaResponseFactory().buildPageDataAsync(\n  component: 'Dashboard',\n  props: {\n    'user': {'name': 'Ada'},\n    'stats': LazyProp(() => loadStats()),\n  },\n  url: request.url,\n  context: context,\n  version: '1.0.0',\n);\n\n// 4. Return JSON for Inertia XHR visits, HTML for initial page loads\nif (request.isInertia) {\n  await writeInertiaResponse(httpRequest.response, InertiaResponse.json(page));\n} else {\n  final html = renderHtmlShell(page); // your HTML template\n  await writeInertiaResponse(httpRequest.response, InertiaResponse.html(page, html));\n}\n"})}),"\n",(0,t.jsxs)(r.p,{children:["For a full working server, see the ",(0,t.jsx)(r.a,{href:"/docs/inertia_dart/tutorial",children:"tutorial"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"props",children:"Props"}),"\n",(0,t.jsx)(r.p,{children:"Property helpers control when data resolves and how it merges across visits."}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Class"}),(0,t.jsx)(r.th,{children:"Initial visit"}),(0,t.jsx)(r.th,{children:"Partial reload"}),(0,t.jsx)(r.th,{children:"Merge"}),(0,t.jsx)(r.th,{children:"Defer"}),(0,t.jsx)(r.th,{children:"Once"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"AlwaysProp"})}),(0,t.jsx)(r.td,{children:"Always included"}),(0,t.jsx)(r.td,{children:"Always included"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"LazyProp"})}),(0,t.jsx)(r.td,{children:"Excluded"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"OptionalProp"})}),(0,t.jsx)(r.td,{children:"Excluded"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"Optional"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"DeferredProp"})}),(0,t.jsx)(r.td,{children:"Registered in group"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"Optional"}),(0,t.jsx)(r.td,{children:"Yes"}),(0,t.jsx)(r.td,{children:"Optional"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"MergeProp"})}),(0,t.jsx)(r.td,{children:"Included (merges)"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"Yes"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"Optional"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"OnceProp"})}),(0,t.jsx)(r.td,{children:"Included (skipped if cached)"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"No"}),(0,t.jsx)(r.td,{children:"Yes"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ScrollProp"})}),(0,t.jsx)(r.td,{children:"Included or deferred"}),(0,t.jsx)(r.td,{children:"Only if requested"}),(0,t.jsx)(r.td,{children:"Yes"}),(0,t.jsx)(r.td,{children:"Optional"}),(0,t.jsx)(r.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final props = {\n  'user': AlwaysProp(() => currentUser),\n  'stats': LazyProp(() => expensiveQuery()),\n  'feed': DeferredProp(() => loadFeed(), group: 'sidebar'),\n  'items': MergeProp(() => fetchPage(page))..append('data', 'id'),\n  'token': OnceProp(() => csrfToken, ttl: Duration(hours: 1)),\n};\n"})}),"\n",(0,t.jsx)(r.h2,{id:"partial-reloads",children:"Partial reloads"}),"\n",(0,t.jsx)(r.p,{children:"The request helpers parse advanced Inertia headers:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Partial-Data"})," -- which props to include"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Partial-Except"})," -- which props to exclude"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Reset"})," -- merge reset keys"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Except-Once-Props"})," -- already-received once props"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Infinite-Scroll-Merge-Intent"})," -- scroll direction"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"X-Inertia-Error-Bag"})," -- error bag selection"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Use ",(0,t.jsx)(r.code,{children:"InertiaRequest.createContext()"})," to build the correct ",(0,t.jsx)(r.code,{children:"PropertyContext"}),"\nautomatically from headers:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final request = inertiaRequestFromHttp(httpRequest);\nfinal context = request.createContext();\n"})}),"\n",(0,t.jsx)(r.h2,{id:"vite-asset-helper",children:"Vite asset helper"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"InertiaViteAssets"})," reads a dev hot file or a production manifest and returns\nscript/style tags:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final assets = InertiaViteAssets(\n  entry: 'index.html',\n  hotFile: 'client/public/hot',\n  manifestPath: 'client/dist/.vite/manifest.json',\n  includeReactRefresh: true,\n);\n\nfinal tags = await assets.resolve();\nfinal styles = tags.renderStyles();   // <link> tags\nfinal scripts = tags.renderScripts(); // <script> tags\n"})}),"\n",(0,t.jsx)(r.h2,{id:"asset-manifest-helper",children:"Asset manifest helper"}),"\n",(0,t.jsx)(r.p,{children:"Load a Vite manifest directly:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final manifest = await InertiaAssetManifest.load('client/dist/.vite/manifest.json');\nfinal tags = manifest.renderTags('index.html', baseUrl: '/');\n"})}),"\n",(0,t.jsx)(r.h2,{id:"ssr",children:"SSR"}),"\n",(0,t.jsxs)(r.p,{children:["Use ",(0,t.jsx)(r.code,{children:"SsrGateway"})," to call an SSR server and render HTML on the server:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final gateway = HttpSsrGateway(Uri.parse('http://localhost:13714'));\nfinal ssr = await gateway.render(jsonPage);\n// ssr.head -- <head> tags\n// ssr.body -- rendered HTML body\n"})}),"\n",(0,t.jsx)(r.p,{children:"Manage a local SSR process:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"final process = await startSsrServer(SsrServerConfig.fromSettings(settings));\nfinal healthy = await checkSsrServer(endpoint: settings.endpoint!);\nawait stopSsrServer(endpoint: settings.endpoint!);\n"})}),"\n",(0,t.jsx)(r.p,{children:"CLI helpers:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run inertia_dart:inertia ssr:start --runtime node\ndart run inertia_dart:inertia ssr:check --url http://127.0.0.1:13714\ndart run inertia_dart:inertia ssr:stop --url http://127.0.0.1:13714\n"})}),"\n",(0,t.jsx)(r.h2,{id:"history-flags",children:"History flags"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"PageData"})," supports history flags for client-side history management:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"encryptHistory"})," -- encrypt the history state"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"clearHistory"})," -- clear the history stack"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"middleware",children:"Middleware"}),"\n",(0,t.jsx)(r.p,{children:"Built-in middleware classes for common protocol concerns:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"VersionMiddleware"})," -- checks ",(0,t.jsx)(r.code,{children:"X-Inertia-Version"})," and forces full reload on mismatch"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"RedirectMiddleware"})," -- rewrites 302 to 303 for PUT/PATCH/DELETE"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"EncryptHistoryMiddleware"})," -- sets the ",(0,t.jsx)(r.code,{children:"encryptHistory"})," flag"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"SharedDataMiddleware"})," -- merges shared props into every response"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"ErrorHandlingMiddleware"})," -- catches errors and sets error props"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(r.p,{children:["Use ",(0,t.jsx)(r.code,{children:"AssertableInertia"})," for response assertions:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-dart",children:"response.assertInertia((page) {\n  page.component('Dashboard').has('user.name');\n});\n"})}),"\n",(0,t.jsx)(r.h2,{id:"vite-hot-file-plugin",children:"Vite hot file plugin"}),"\n",(0,t.jsxs)(r.p,{children:["The package ships a Vite plugin that writes a ",(0,t.jsx)(r.code,{children:"public/hot"})," file on dev server\nstart (containing the dev server URL) and deletes it on shutdown. Copy\n",(0,t.jsx)(r.a,{href:"https://github.com/kingwill101/routed/tree/main/packages/inertia/assets/vite/inertia_hot_file.js",children:(0,t.jsx)(r.code,{children:"assets/vite/inertia_hot_file.js"})}),"\ninto your client project:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"import { defineConfig } from 'vite'\nimport { inertiaHotFile } from './inertia_hot_file.js'\n\nexport default defineConfig({\n  plugins: [inertiaHotFile()],\n})\n"})}),"\n",(0,t.jsx)(r.h2,{id:"example-apps",children:"Example apps"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"https://github.com/kingwill101/routed/tree/main/packages/inertia/example/inertia_client_app",children:(0,t.jsx)(r.code,{children:"packages/inertia/example/inertia_client_app"})})," -- standalone ",(0,t.jsx)(r.code,{children:"dart:io"})," server with client-side Inertia"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"https://github.com/kingwill101/routed/tree/main/packages/inertia/example/inertia_ssr_app",children:(0,t.jsx)(r.code,{children:"packages/inertia/example/inertia_ssr_app"})})," -- standalone ",(0,t.jsx)(r.code,{children:"dart:io"})," server with SSR"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"learn-more",children:"Learn more"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"https://inertiajs.com",children:"Inertia.js docs"})," -- protocol specification and client adapters"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.a,{href:"/docs/routed_inertia/",children:"Routed Inertia"})," -- framework integration for Routed apps"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);