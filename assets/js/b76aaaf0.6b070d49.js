"use strict";(self.webpackChunkrouted=self.webpackChunkrouted||[]).push([[6401],{8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(6540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},9060:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"routed/examples/engine-default-router","title":"Engine Default Router Example","description":"Use the engine-level router to define routes, middleware, and named URLs","source":"@site/docs/routed/examples/engine-default-router.mdx","sourceDirName":"routed/examples","slug":"/routed/examples/engine-default-router","permalink":"/docs/routed/examples/engine-default-router","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/examples/engine-default-router.mdx","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Engine Default Router Example","description":"Use the engine-level router to define routes, middleware, and named URLs","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Liquid Page Rendering","permalink":"/docs/routed/examples/liquid-page"},"next":{"title":"Route Grouping Demo","permalink":"/docs/routed/examples/route-grouping"}}');var i=t(4848),s=t(8453);const o={title:"Engine Default Router Example",description:"Use the engine-level router to define routes, middleware, and named URLs",sidebar_position:4},l=void 0,a={},d=[{value:"Running the example",id:"running-the-example",level:2},{value:"Middleware highlight",id:"middleware-highlight",level:2},{value:"Named routes",id:"named-routes",level:2}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The repository ships with ",(0,i.jsx)(n.a,{href:"https://github.com/kingwill101/routed/tree/main/examples/engine_default_router",children:(0,i.jsx)(n.code,{children:"examples/engine_default_router"})}),", a concise demo that relies solely on the engine\u2019s built-in router. It illustrates how to:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Register routes directly on the ",(0,i.jsx)(n.code,{children:"Engine"})]}),"\n",(0,i.jsx)(n.li,{children:"Access route parameters and name routes for URL generation"}),"\n",(0,i.jsx)(n.li,{children:"Guard endpoints with middleware"}),"\n",(0,i.jsx)(n.li,{children:"Mix JSON responses and simple strings"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"running-the-example",children:"Running the example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd examples/engine_default_router\ndart pub get\ndart run bin/server.dart\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The server starts on ",(0,i.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"}),". Try the following requests:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List users (run these in a second terminal while the server is running)\ncurl http://localhost:3000/users | jq\n\n# Create a user (echoes the request body)\ncurl -X POST http://localhost:3000/users \\\n  -H 'content-type: application/json' \\\n  -d '{\"name\": \"Ada\"}' | jq\n\n# Fetch a user by ID\ncurl http://localhost:3000/users/42 | jq\n"})}),"\n",(0,i.jsx)(n.h2,{id:"middleware-highlight",children:"Middleware highlight"}),"\n",(0,i.jsxs)(n.p,{children:["The example protects ",(0,i.jsx)(n.code,{children:"/admin/*"})," routes with inline middleware:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"engine.group(\n  path: '/admin',\n  middlewares: [\n    (ctx, next) async {\n      final token = ctx.requestHeader('Authorization');\n      if (token != 'secret') {\n        return ctx.json({'error': 'Unauthorized'}, statusCode: 401);\n      }\n      return next();\n    },\n  ],\n  builder: (router) {\n    router.get('/stats', (ctx) => ctx.json({'stats': {'users': 100, 'posts': 500}}));\n  },\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:"Swap the middleware for your own authentication or rate-limiting logic when adapting the example for real projects."}),"\n",(0,i.jsx)(n.h2,{id:"named-routes",children:"Named routes"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"engine_default_router"})," also demonstrates generating URLs from named routes:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"engine.get('/articles/{slug}', (ctx) {\n  final slug = ctx.param('slug');\n  return ctx.json({\n    'article': {\n      'slug': slug,\n      'title': 'Article about $slug',\n    },\n    'url': route('articles.show', {'slug': slug}),\n  });\n}).name('articles.show');\n"})}),"\n",(0,i.jsx)(n.p,{children:"Named routes are especially useful when building HTML links or generating URLs inside templates."}),"\n",(0,i.jsx)(n.p,{children:"Use this example as a starting point whenever you want to stay close to the engine API without introducing additional routers."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Prefer configuration-driven middleware/feature toggles? Mirror the example by adding the corresponding entries to ",(0,i.jsx)(n.code,{children:"config/http.yaml"})," (see ",(0,i.jsx)(n.a,{href:"/docs/routed/fundamentals/configuration",children:"configuration fundamentals"}),") and register the required providers. ",(0,i.jsx)(n.code,{children:"dart run routed_cli provider:list --config"})," helps you verify the manifest when you migrate this sample into a larger application."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);