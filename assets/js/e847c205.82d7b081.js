"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[1985],{1729:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"static-assets","title":"Static Assets","description":"Serve files and directories through routed static mounts","source":"@site/docs/routed/static-assets.mdx","sourceDirName":".","slug":"/static-assets","permalink":"/docs/routed/static-assets","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/static-assets.mdx","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Static Assets","description":"Serve files and directories through routed static mounts","sidebar_position":20},"sidebar":"routedSidebar","previous":{"title":"Project CLI Commands","permalink":"/docs/routed/examples/project-commands"},"next":{"title":"Storage","permalink":"/docs/routed/storage"}}');var n=t(4848),r=t(8453);const o={title:"Static Assets",description:"Serve files and directories through routed static mounts",sidebar_position:20},c="Static Assets",d={},a=[{value:"Configuration",id:"configuration",level:2},{value:"Mount options",id:"mount-options",level:2},{value:"Behavior",id:"behavior",level:2},{value:"Programmatic helpers",id:"programmatic-helpers",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next steps",id:"next-steps",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"static-assets",children:"Static Assets"})}),"\n",(0,n.jsxs)(s.p,{children:["Static mounts expose files and directories through declarative configuration. They sit in the request pipeline as middleware and are also registered as ",(0,n.jsx)(s.code,{children:"GET"}),"/",(0,n.jsx)(s.code,{children:"HEAD"})," routes (so they appear in ",(0,n.jsx)(s.code,{children:"routed routes"}),")."]}),"\n",(0,n.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,n.jsxs)(s.p,{children:["Define mounts under ",(0,n.jsx)(s.code,{children:"static.mounts"})," and back them with storage disks:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",metastring:'title="config/static.yaml"',children:"static:\n  enabled: true\n  mounts:\n    - route: /assets\n      disk: assets\n      path: ''\n      index: index.html\n      list_directories: false\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",metastring:'title="config/storage.yaml"',children:"storage:\n  default: assets\n  disks:\n    assets:\n      driver: local\n      root: public\n"})}),"\n",(0,n.jsx)(s.h2,{id:"mount-options",children:"Mount options"}),"\n",(0,n.jsx)(s.p,{children:"Each mount supports:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"route"})," (or ",(0,n.jsx)(s.code,{children:"prefix"}),"): URL prefix to match."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"disk"}),": storage disk name to resolve files."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"path"}),": subdirectory within the disk root."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"root"}),": explicit file system root (bypasses disks)."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"index"}),": default file for directory requests."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"list_directories"})," / ",(0,n.jsx)(s.code,{children:"directory_listing"}),": enable directory listings."]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Programmatic configuration can also supply ",(0,n.jsx)(s.code,{children:"file_system"})," when mounting assets."]}),"\n",(0,n.jsx)(s.h2,{id:"behavior",children:"Behavior"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Missing files do ",(0,n.jsx)(s.strong,{children:"not"})," match the mount route; requests fall through to normal routing."]}),"\n",(0,n.jsxs)(s.li,{children:["Directory requests use ",(0,n.jsx)(s.code,{children:"index"})," if configured, otherwise fall back to listing (when enabled)."]}),"\n",(0,n.jsx)(s.li,{children:"Paths are normalized and rejected if they escape the disk root."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"programmatic-helpers",children:"Programmatic helpers"}),"\n",(0,n.jsx)(s.p,{children:"You can still register assets directly in code:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-dart",children:"router.static('/assets', 'public/assets');\nrouter.staticFile('/favicon.ico', 'public/favicon.ico');\n"})}),"\n",(0,n.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["If mounts 404, confirm the storage disk root matches your project ",(0,n.jsx)(s.code,{children:"public"})," directory."]}),"\n",(0,n.jsxs)(s.li,{children:["Use ",(0,n.jsx)(s.code,{children:"routed provider:list --config"})," to see merged mount config and ",(0,n.jsx)(s.code,{children:"routed routes"})," to verify the mount routes are registered."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/docs/routed/fundamentals/routing#static-assets",children:"Routing: Static assets"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/docs/routed/fundamentals/configuration#static-assets",children:"Configuration: Static assets"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/docs/routed/fundamentals/responses#files-and-static-assets",children:"Responses: Files and static assets"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>c});var i=t(6540);const n={},r=i.createContext(n);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);