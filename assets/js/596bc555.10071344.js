"use strict";(self.webpackChunkrouted=self.webpackChunkrouted||[]).push([[7199],{5129:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"server-testing/test-client/response-assertions","title":"Response Assertions","description":"Learn about the TestResponse assertion capabilities","source":"@site/docs/server-testing/test-client/response-assertions.mdx","sourceDirName":"server-testing/test-client","slug":"/server-testing/test-client/response-assertions","permalink":"/docs/server-testing/test-client/response-assertions","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/server-testing/test-client/response-assertions.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Response Assertions","description":"Learn about the TestResponse assertion capabilities","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"TestResponse","permalink":"/docs/server-testing/test-client/test-response"},"next":{"title":"Header Extensions","permalink":"/docs/server-testing/test-client/headers"}}');var r=n(4848),i=n(8453);const a={title:"Response Assertions",description:"Learn about the TestResponse assertion capabilities",sidebar_position:3},o="Response Assertions",c={},d=[{value:"Status Assertions",id:"status-assertions",level:2},{value:"Header Assertions",id:"header-assertions",level:2},{value:"Body Assertions",id:"body-assertions",level:2},{value:"JSON Assertions",id:"json-assertions",level:2},{value:"Basic JSON Checking",id:"basic-json-checking",level:3},{value:"Advanced JSON Assertions",id:"advanced-json-assertions",level:3},{value:"Nested JSON Assertions",id:"nested-json-assertions",level:3},{value:"Conditional Assertions",id:"conditional-assertions",level:3},{value:"File Upload Assertions",id:"file-upload-assertions",level:3},{value:"Debugging",id:"debugging",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"response-assertions",children:"Response Assertions"})}),"\n",(0,r.jsx)(s.p,{children:"TestResponse provides a rich set of assertions for verifying responses."}),"\n",(0,r.jsx)(s.h2,{id:"status-assertions",children:"Status Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  // Basic status check\n  .assertStatus(200)\n  \n  // Common status codes\n  .assertStatus(HttpStatus.ok)\n  .assertStatus(HttpStatus.created)\n  .assertStatus(HttpStatus.notFound)\n  .assertStatus(HttpStatus.unauthorized);\n"})}),"\n",(0,r.jsx)(s.h2,{id:"header-assertions",children:"Header Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  // Check header exists\n  .assertHasHeader('Content-Type')\n  \n  // Check exact header value\n  .assertHeader('Content-Type', 'application/json')\n  \n  // Check header contains value\n  .assertHeaderContains('Content-Type', 'json')\n  \n  // Check multiple values\n  .assertHeaderContains('Allow', ['GET', 'POST']);\n"})}),"\n",(0,r.jsx)(s.h2,{id:"body-assertions",children:"Body Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  // Check body is not empty\n  .assertBodyIsNotEmpty()\n  \n  // Check exact body content\n  .assertBodyEquals('{\"status\":\"ok\"}')\n  \n  // Check body contains substring\n  .assertBodyContains('success')\n  \n  // Check multiple substrings\n  .assertBodyContains('success')\n  .assertBodyContains('data');\n"})}),"\n",(0,r.jsx)(s.h2,{id:"json-assertions",children:"JSON Assertions"}),"\n",(0,r.jsx)(s.h3,{id:"basic-json-checking",children:"Basic JSON Checking"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  // Check JSON structure\n  .assertJson((json) {\n    json\n      .has('user')\n      .has('meta')\n      .missing('error');\n  })\n  \n  // Check specific path\n  .assertJsonPath('user.name', 'John')\n  \n  // Check JSON subset\n  .assertJsonContains({\n    'user': {'name': 'John'},\n    'status': 'active'\n  });\n"})}),"\n",(0,r.jsx)(s.h3,{id:"advanced-json-assertions",children:"Advanced JSON Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response.assertJson((json) {\n  json\n    // Type checking\n    .whereType<int>('id')\n    .whereType<String>('email')\n    .whereType<List>('roles')\n    \n    // Value matching\n    .where('name', 'John')\n    .whereNot('status', 'inactive')\n    .whereIn('role', ['admin', 'user'])\n    \n    // Numeric comparisons\n    .isGreaterThan('age', 18)\n    .isLessThan('price', 100)\n    .isBetween('count', 1, 10)\n    \n    // Array/object checking\n    .count('items', 3)\n    .countBetween('items', 1, 5)\n    .hasAll(['id', 'name', 'email'])\n    \n    // Check unhandled properties\n    .etc();  // Marks all remaining properties as checked\n});\n"})}),"\n",(0,r.jsx)(s.h3,{id:"nested-json-assertions",children:"Nested JSON Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response.assertJson((json) {\n  // Check nested objects\n  json.scope('user', (user) {\n    user\n      .where('name', 'John')\n      .where('email', 'john@example.com')\n      .scope('preferences', (prefs) {\n        prefs\n          .where('theme', 'dark')\n          .where('language', 'en');\n      });\n  });\n  \n  // Check arrays\n  json.scope('items', (items) {\n    // Check first item\n    items.first((item) {\n      item.where('id', 1);\n    });\n    \n    // Check each item\n    items.each((item) {\n      item\n        .has('id')\n        .has('name')\n        .whereType<int>('id');\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(s.h3,{id:"conditional-assertions",children:"Conditional Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response.assertJson((json) {\n  json\n    // Assert when condition is true\n    .when(isAdmin, (json) {\n      json.has('adminPanel');\n    })\n    \n    // Assert when condition is false\n    .unless(isBasicUser, (json) {\n      json.has('advancedFeatures');\n    });\n});\n"})}),"\n",(0,r.jsx)(s.h3,{id:"file-upload-assertions",children:"File Upload Assertions"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  .assertJsonFilesContain('uploads', 'profile.jpg')\n  .assertJson((json) {\n    json.scope('uploads', (uploads) {\n      uploads.each((file) {\n        file\n          .has('filename')\n          .has('size')\n          .has('content_type');\n      });\n    });\n  });\n"})}),"\n",(0,r.jsx)(s.h2,{id:"debugging",children:"Debugging"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-dart",children:"response\n  // Print response details\n  .dump()\n  \n  // Continue assertions\n  .assertStatus(200)\n  .assertJson((json) {\n    json\n      // Tap into assertion chain for debugging\n      .tap((j) => print('JSON: ${j.toString()}'))\n      .has('data');\n  });\n"})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var t=n(6540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);