"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[9019],{7941:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"examples/route-grouping","title":"Route Grouping Demo","description":"Organise routes with nested groups, middleware, and parameter constraints","source":"@site/docs/routed/examples/route-grouping.mdx","sourceDirName":"examples","slug":"/examples/route-grouping","permalink":"/docs/routed/examples/route-grouping","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/examples/route-grouping.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Route Grouping Demo","description":"Organise routes with nested groups, middleware, and parameter constraints","sidebar_position":5},"sidebar":"routedSidebar","previous":{"title":"Engine Default Router Example","permalink":"/docs/routed/examples/engine-default-router"},"next":{"title":"Config & CLI Demo","permalink":"/docs/routed/examples/config-demo"}}');var r=n(4848),o=n(8453);const i={title:"Route Grouping Demo",description:"Organise routes with nested groups, middleware, and parameter constraints",sidebar_position:5},d=void 0,a={},c=[{value:"Run the example",id:"run-the-example",level:2},{value:"Admin middleware",id:"admin-middleware",level:2},{value:"Versioned APIs",id:"versioned-apis",level:2},{value:"Resource-style routes",id:"resource-style-routes",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/kingwill101/routed/tree/main/examples/route_grouping",children:(0,r.jsx)(t.code,{children:"examples/route_grouping"})})," showcases how routing hierarchies work in Routed. It combines authentication, API versioning, and nested resources in a single file."]}),"\n",(0,r.jsx)(t.h2,{id:"run-the-example",children:"Run the example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"cd examples/route_grouping\ndart pub get\ndart run bin/server.dart\n"})}),"\n",(0,r.jsxs)(t.p,{children:["The example listens on ",(0,r.jsx)(t.a,{href:"http://localhost:3000",children:"http://localhost:3000"}),". Key endpoints:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Route"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GET /admin/dashboard"})}),(0,r.jsxs)(t.td,{children:["Protected admin dashboard (requires ",(0,r.jsx)(t.code,{children:"Authorization: admin-token"}),")"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GET /api/v1/status"})}),(0,r.jsx)(t.td,{children:"Versioned API status endpoint"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GET /posts"})}),(0,r.jsx)(t.td,{children:"List posts"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GET /posts/{id}"})}),(0,r.jsx)(t.td,{children:"Fetch a post by numeric ID"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"GET /posts/{post_id}/comments"})}),(0,r.jsx)(t.td,{children:"Nested comments for a post"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"admin-middleware",children:"Admin middleware"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-dart",children:"engine.group(\n  path: '/admin',\n  middlewares: [\n    (ctx, next) async {\n      if (ctx.requestHeader('Authorization') != 'admin-token') {\n        return ctx.json({'error': 'Unauthorized access'}, statusCode: 401);\n      }\n      return next();\n    },\n  ],\n  builder: (router) {\n    router.get('/dashboard', (ctx) => ctx.json({'section': 'dashboard'}));\n    router.get('/users', (ctx) => ctx.json({'section': 'users', 'count': 100}));\n  },\n);\n"})}),"\n",(0,r.jsx)(t.p,{children:"Nested groups inherit parent paths automatically, keeping your URL structure tidy."}),"\n",(0,r.jsx)(t.h2,{id:"versioned-apis",children:"Versioned APIs"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"/api"})," group injects a header and then nests ",(0,r.jsx)(t.code,{children:"/v1"})," and ",(0,r.jsx)(t.code,{children:"/v2"})," routers:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-dart",children:"engine.group(\n  path: '/api',\n  middlewares: [\n    (ctx, next) async {\n      ctx.setHeader('X-API-Version', ctx.param('version') ?? 'unknown');\n      return next();\n    },\n  ],\n  builder: (api) {\n    api.group(path: '/v1', builder: (v1) {\n      v1.get('/status', (ctx) => ctx.json({'version': 'v1', 'status': 'active'}));\n    });\n\n    api.group(path: '/v2', builder: (v2) {\n      v2.get('/status', (ctx) => ctx.json({'version': 'v2', 'status': 'beta'}));\n    });\n  },\n);\n"})}),"\n",(0,r.jsx)(t.h2,{id:"resource-style-routes",children:"Resource-style routes"}),"\n",(0,r.jsx)(t.p,{children:"The example also demonstrates resource-style patterns, including constrained parameters and nested resources:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-dart",children:"engine.group(path: '/posts', builder: (posts) {\n  posts.get('/', (ctx) => ctx.json({'posts': [/* ... */]}));\n\n  posts.get('/{id:int}', (ctx) {\n    final id = ctx.param('id');\n    return ctx.json({'id': id, 'title': 'Post details'});\n  });\n\n  posts.group(path: '/{post_id:int}/comments', builder: (comments) {\n    comments.get('/', (ctx) {\n      return ctx.json({\n        'post_id': ctx.param('post_id'),\n        'comments': [/* ... */],\n      });\n    });\n  });\n});\n"})}),"\n",(0,r.jsx)(t.p,{children:"Use this example whenever you need to share middleware across a group of routes, build versioned APIs, or structure nested REST resources."}),"\n",(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsxs)(t.p,{children:["For production apps, move shared middleware/feature toggles into ",(0,r.jsx)(t.code,{children:"config/http.yaml"})," (for example under ",(0,r.jsx)(t.code,{children:"http.middleware.groups.admin"}),") so the manifest documents your pipeline. ",(0,r.jsx)(t.code,{children:"dart run routed provider:list --config"})," shows the merged defaults and helps you keep provider-driven stacks in sync with code samples like this one."]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var s=n(6540);const r={},o=s.createContext(r);function i(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);