"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[2595],{3495:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"fundamentals/cli","title":"Routed CLI Reference","description":"Scaffold projects, run the dev server, inspect manifests, and manage providers with routed","source":"@site/docs/routed/fundamentals/cli.mdx","sourceDirName":"fundamentals","slug":"/fundamentals/cli","permalink":"/docs/routed/fundamentals/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/fundamentals/cli.mdx","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"title":"Routed CLI Reference","description":"Scaffold projects, run the dev server, inspect manifests, and manage providers with routed","sidebar_position":15},"sidebar":"routedSidebar","previous":{"title":"Observability","permalink":"/docs/routed/fundamentals/observability"},"next":{"title":"Building Providers","permalink":"/docs/routed/fundamentals/providers"}}');var t=r(4848),d=r(8453);const i={title:"Routed CLI Reference",description:"Scaffold projects, run the dev server, inspect manifests, and manage providers with routed",sidebar_position:15},s="Routed CLI Reference",a={},c=[{value:"<code>create</code>",id:"create",level:2},{value:"<code>dev</code>",id:"dev",level:2},{value:"<code>routes</code>",id:"routes",level:2},{value:"<code>spec:generate</code>",id:"specgenerate",level:2},{value:"<code>openapi generate</code>",id:"openapi-generate",level:2},{value:"Provider &amp; configuration helpers",id:"provider--configuration-helpers",level:2},{value:"Project-defined commands",id:"project-defined-commands",level:2},{value:"Provider-defined commands",id:"provider-defined-commands",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"routed-cli-reference",children:"Routed CLI Reference"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"routed"})," package ships project scaffolding, a hot-reload dev server, route/spec inspection utilities, and manifest helpers. Install it beside your application (recommended) or activate it globally:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dart pub add --dev routed\n# or: dart pub global activate routed\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Run commands with ",(0,t.jsx)(n.code,{children:"dart run routed <command> [...]"}),". Add ",(0,t.jsx)(n.code,{children:"--verbose"})," to surface extra debug output."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Choosing a Dart executable:"})," The CLI honours the first set environment variable in ",(0,t.jsx)(n.code,{children:"ROUTED_CLI_DART"}),", ",(0,t.jsx)(n.code,{children:"DART_BIN"}),", or ",(0,t.jsx)(n.code,{children:"DART_PATH"}),". Set one of these when you manage multiple SDKs (for example, with FVM) so every command launches the intended runtime."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"create",children:(0,t.jsx)(n.code,{children:"create"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dart run routed create --name my_app [--output <dir>] [--force]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Scaffolds a Routed project, writing ",(0,t.jsx)(n.code,{children:"bin/server.dart"}),", config manifests, README, ",(0,t.jsx)(n.code,{children:".env"}),", analysis options, and storage directories. Options:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--name/-n"})," \u2013 project & package name (required when scaffolding into the current directory)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--output/-o"})," \u2013 destination directory (defaults to ",(0,t.jsx)(n.code,{children:"."}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--template/-t"})," \u2013 template to use (",(0,t.jsx)(n.code,{children:"basic"}),", ",(0,t.jsx)(n.code,{children:"api"}),", ",(0,t.jsx)(n.code,{children:"web"}),", or ",(0,t.jsx)(n.code,{children:"fullstack"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"--force/-f"})," \u2013 overwrite conflicting files."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["After generating files, ",(0,t.jsx)(n.code,{children:"create"})," automatically runs ",(0,t.jsx)(n.code,{children:"dart pub get"})," using the resolved Dart executable. If dependency resolution fails the CLI prints the exit code and keeps the \u201cNext steps\u201d list so you can retry manually."]}),"\n",(0,t.jsx)(n.h2,{id:"dev",children:(0,t.jsx)(n.code,{children:"dev"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dart run routed dev [--entry bin/server.dart] [--host 127.0.0.1] [--port 8080]\n"})}),"\n",(0,t.jsx)(n.p,{children:"Launches a development server with hot-reload support. Highlights:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Resolves the correct Dart binary (respecting the environment overrides above) and enables the VM service."}),"\n",(0,t.jsxs)(n.li,{children:["Generates a bootstrap that wires in ",(0,t.jsx)(n.a,{href:"https://pub.dev/packages/hotreloader",children:(0,t.jsx)(n.code,{children:"hotreloader"})})," so file changes trigger reloads."]}),"\n",(0,t.jsxs)(n.li,{children:["Restarts the process automatically when ",(0,t.jsx)(n.code,{children:"--bootstrap=false"})," (or ",(0,t.jsx)(n.code,{children:"--no-bootstrap"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Accepts additional flags: ",(0,t.jsx)(n.code,{children:"--bootstrap-path"}),", ",(0,t.jsx)(n.code,{children:"--install-missing/--no-install-missing"}),", ",(0,t.jsx)(n.code,{children:"--no-warn-missing"}),", and ",(0,t.jsx)(n.code,{children:"--watch"})," for custom directories."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Use this during development; fall back to ",(0,t.jsx)(n.code,{children:"dart run bin/server.dart"}),' for single runs or CI pipelines. If you see "Entry file not found" errors, pass ',(0,t.jsx)(n.code,{children:"--entry"})," to point at your server file."]}),"\n",(0,t.jsx)(n.h2,{id:"routes",children:(0,t.jsx)(n.code,{children:"routes"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dart run routed routes [--format table|json] [--entry tool/spec_manifest.dart]\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Prints the HTTP and WebSocket routes for your application. The loader tries ",(0,t.jsx)(n.code,{children:"lib/app.dart"})," (expecting a ",(0,t.jsx)(n.code,{children:"createEngine()"})," function) and falls back to ",(0,t.jsx)(n.code,{children:"tool/spec_manifest.dart"}),", or you can point to a custom entry. Use ",(0,t.jsx)(n.code,{children:"--format json"})," together with ",(0,t.jsx)(n.code,{children:"--no-pretty"})," when parsing from scripts."]}),"\n",(0,t.jsx)(n.h2,{id:"specgenerate",children:(0,t.jsx)(n.code,{children:"spec:generate"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"dart run routed spec:generate --output .dart_tool/routed/route_manifest.json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Writes a JSON route manifest to disk. Useful for documentation, contract tests, or code generators. Accepts the same ",(0,t.jsx)(n.code,{children:"--entry"})," and ",(0,t.jsx)(n.code,{children:"--pretty/--no-pretty"})," options as ",(0,t.jsx)(n.code,{children:"routes"}),". The CLI ensures parent directories exist before writing."]}),"\n",(0,t.jsx)(n.h2,{id:"openapi-generate",children:(0,t.jsx)(n.code,{children:"openapi generate"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'dart run routed openapi generate [--title "My API"] [--version 1.0.0] [--server https://api.example.com]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Generates an OpenAPI 3.1 document from your routed engine. By default the CLI writes ",(0,t.jsx)(n.code,{children:".dart_tool/routed/openapi.json"}),"; use ",(0,t.jsx)(n.code,{children:"--output"})," to change the destination and ",(0,t.jsx)(n.code,{children:"--server"})," (repeatable) to declare server URLs. Metadata added via ",(0,t.jsx)(n.code,{children:"routeBuilder.openApi((op) { ... })"})," flows into the generated spec."]}),"\n",(0,t.jsx)(n.h2,{id:"provider--configuration-helpers",children:"Provider & configuration helpers"}),"\n",(0,t.jsx)(n.p,{children:"Additional commands help manage configuration manifests:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"config:init"}),", ",(0,t.jsx)(n.code,{children:"config:publish"}),", ",(0,t.jsx)(n.code,{children:"config:cache"}),", ",(0,t.jsx)(n.code,{children:"config:clear"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"provider:list"}),", ",(0,t.jsx)(n.code,{children:"provider:enable"}),", ",(0,t.jsx)(n.code,{children:"provider:disable"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.a,{href:"/docs/routed/fundamentals/configuration",children:"Configuration"})," for details and usage patterns."]}),"\n",(0,t.jsx)(n.h2,{id:"project-defined-commands",children:"Project-defined commands"}),"\n",(0,t.jsxs)(n.p,{children:["Every scaffold now includes ",(0,t.jsx)(n.code,{children:"lib/commands.dart"})," exposing a\n",(0,t.jsx)(n.code,{children:"buildProjectCommands()"})," hook. Return one or more ",(0,t.jsx)(n.code,{children:"Command<void>"}),' instances and\nthe Routed CLI will load them automatically when you run commands from inside\nthe project. Project commands are listed under a "Project" section in\n',(0,t.jsx)(n.code,{children:"dart run routed --help"})," alongside the built-ins."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:'title="lib/commands.dart"',children:"import 'dart:async';\nimport 'package:args/command_runner.dart';\n\nclass QueueWorkCommand extends Command<void> {\n  @override\n  String get name => 'queue:work';\n\n  @override\n  String get description => 'Run the queue worker for the selected queue.';\n\n  QueueWorkCommand() {\n    argParser.addOption('queue', defaultsTo: 'default');\n  }\n\n  @override\n  Future<void> run() async {\n    final target = argResults?.option('queue') ?? 'default';\n    // Insert your worker startup logic here.\n    print('Starting worker for $target');\n  }\n}\n\nFutureOr<List<Command<void>>> buildProjectCommands() => [QueueWorkCommand()];\n"})}),"\n",(0,t.jsx)(n.p,{children:"If a project command reuses a built-in name (or alias) the CLI exits with a\ndescriptive conflict so you can pick a different identifier. Use this hook for\nqueue workers, seeders, diagnostic scripts, and other project automation."}),"\n",(0,t.jsx)(n.h2,{id:"provider-defined-commands",children:"Provider-defined commands"}),"\n",(0,t.jsxs)(n.p,{children:["Providers can register CLI commands so every app that includes the provider\nautomatically gains the associated tooling. Register commands with\n",(0,t.jsx)(n.code,{children:"ProviderCommandRegistry"})," and return a factory so the CLI can instantiate them\nonly when it builds the command list."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:'title="lib/providers/my_provider.dart"',children:"import 'package:args/command_runner.dart';\nimport 'package:routed/console.dart';\nimport 'package:routed/routed.dart';\n\nclass MyProviderCommand extends Command<void> {\n  @override\n  String get name => 'my:task';\n\n  @override\n  String get description => 'Run provider maintenance.';\n\n  @override\n  Future<void> run() async {\n    // command logic\n  }\n}\n\nclass MyProvider extends ServiceProvider {\n  @override\n  void register(Container container) {\n    ProviderCommandRegistry.instance.register(\n      'my:task',\n      factory: () => MyProviderCommand(),\n      description: 'Provider maintenance command',\n    );\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Provider commands are loaded alongside built-ins and project commands. If a\nprovider command conflicts with an existing name or alias the CLI exits with a\nusage error so you can rename it."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["For artisanal runners, use ",(0,t.jsx)(n.code,{children:"ProviderArtisanalCommandRegistry"})," to expose\nprovider command factories to application-specific tooling."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"dart pub get"})," failures:"]})," The ",(0,t.jsx)(n.code,{children:"create"})," command forwards the resolver's exit code. Fix dependency constraints, then rerun the command or execute ",(0,t.jsx)(n.code,{children:"dart pub get"})," manually."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hot reload not available:"})," The dev server installs ",(0,t.jsx)(n.code,{children:"hotreloader"})," automatically when the project contains a ",(0,t.jsx)(n.code,{children:"pubspec.yaml"}),". Pass ",(0,t.jsx)(n.code,{children:"--no-install-missing"})," to skip installation or ",(0,t.jsx)(n.code,{children:"--no-bootstrap"})," to disable the bootstrap entirely."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Wrong Dart SDK:"})," Set ",(0,t.jsx)(n.code,{children:"ROUTED_CLI_DART"})," (or ",(0,t.jsx)(n.code,{children:"DART_BIN"})," / ",(0,t.jsx)(n.code,{children:"DART_PATH"}),") to a specific SDK path before running CLI commands."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var o=r(6540);const t={},d=o.createContext(t);function i(e){const n=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);