"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[5060],{1469:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"advanced/custom-validation","title":"Custom Validation","description":"Create bespoke validation rules and register them globally","source":"@site/docs/routed/advanced/custom-validation.mdx","sourceDirName":"advanced","slug":"/advanced/custom-validation","permalink":"/docs/routed/advanced/custom-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/advanced/custom-validation.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Custom Validation","description":"Create bespoke validation rules and register them globally","sidebar_position":1},"sidebar":"routedSidebar","previous":{"title":"engineGroup Patterns","permalink":"/docs/routed/testing/engine-group"},"next":{"title":"Dependency Injection","permalink":"/docs/routed/advanced/dependency-injection"}}');var r=i(4848),a=i(8453);const s={title:"Custom Validation",description:"Create bespoke validation rules and register them globally",sidebar_position:1},l="Custom Validation Rules",o={},d=[{value:"Creating a Custom Rule",id:"creating-a-custom-rule",level:2},{value:"Example Rules",id:"example-rules",level:2},{value:"Password Strength Rule",id:"password-strength-rule",level:3},{value:"Credit Card Rule",id:"credit-card-rule",level:3},{value:"Phone Number Rule",id:"phone-number-rule",level:3},{value:"Using Custom Rules",id:"using-custom-rules",level:2},{value:"Registration",id:"registration",level:3},{value:"Usage in Validation",id:"usage-in-validation",level:3},{value:"Rules with Options",id:"rules-with-options",level:2}];function u(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"custom-validation-rules",children:"Custom Validation Rules"})}),"\n",(0,r.jsx)(n.p,{children:"While Routed provides many built-in validation rules, you can also create custom rules for your specific needs."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",metastring:'title="Import validation helpers"',children:"import 'package:routed/validation.dart';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-custom-rule",children:"Creating a Custom Rule"}),"\n",(0,r.jsxs)(n.p,{children:["To create a custom validation rule, implement the ",(0,r.jsx)(n.code,{children:"ValidationRule"})," interface:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"class CustomRule implements ValidationRule {\n  @override\n  String get name => 'custom_rule_name';\n\n  @override\n  String message(dynamic value, [List<String>? options]) =>\n      'Custom error message';\n\n  @override\n  bool validate(dynamic value, [List<String>? options]) {\n    // Implement validation logic\n    return true; // or false based on validation\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"example-rules",children:"Example Rules"}),"\n",(0,r.jsx)(n.h3,{id:"password-strength-rule",children:"Password Strength Rule"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"class PasswordStrengthRule implements ValidationRule {\n  @override\n  String get name => 'strong_password';\n\n  @override\n  String message(dynamic value, [List<String>? options]) =>\n      'Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character';\n\n  @override\n  bool validate(dynamic value, [List<String>? options]) {\n    if (value == null || value is! String) return false;\n    \n    return RegExp(\n      r'^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,}$'\n    ).hasMatch(value);\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"credit-card-rule",children:"Credit Card Rule"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"class CreditCardRule implements ValidationRule {\n  @override\n  String get name => 'credit_card';\n\n  @override\n  String message(dynamic value, [List<String>? options]) =>\n      'Must be a valid credit card number';\n\n  @override\n  bool validate(dynamic value, [List<String>? options]) {\n    if (value == null) return false;\n    \n    // Remove spaces and dashes\n    final number = value.toString().replaceAll(RegExp(r'[\\s-]'), '');\n    \n    // Check if contains only digits\n    if (!RegExp(r'^\\d+$').hasMatch(number)) return false;\n    \n    // Implement Luhn algorithm\n    int sum = 0;\n    bool alternate = false;\n    \n    for (int i = number.length - 1; i >= 0; i--) {\n      int n = int.parse(number[i]);\n      if (alternate) {\n        n *= 2;\n        if (n > 9) n = (n % 10) + 1;\n      }\n      sum += n;\n      alternate = !alternate;\n    }\n    \n    return sum % 10 == 0;\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"phone-number-rule",children:"Phone Number Rule"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"class PhoneNumberRule implements ValidationRule {\n  @override\n  String get name => 'phone';\n\n  @override\n  String message(dynamic value, [List<String]? options]) =>\n      'Must be a valid phone number';\n\n  @override\n  bool validate(dynamic value, [List<String]? options]) {\n    if (value == null) return false;\n    \n    // Basic US phone number format\n    return RegExp(r'^\\d{3}-\\d{3}-\\d{4}$').hasMatch(value.toString());\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"using-custom-rules",children:"Using Custom Rules"}),"\n",(0,r.jsx)(n.h3,{id:"registration",children:"Registration"}),"\n",(0,r.jsx)(n.p,{children:"First, register your custom rules (pass a factory; rule names must be unique):"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Note: ",(0,r.jsx)(n.code,{children:"ValidationRuleRegistry"})," is registered by ",(0,r.jsx)(n.code,{children:"RoutingServiceProvider"}),". If you construct ",(0,r.jsx)(n.code,{children:"Engine(includeDefaultProviders: false)"}),", register that provider (or register the registry manually) before calling ",(0,r.jsx)(n.code,{children:"engine.container.get<ValidationRuleRegistry>()"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"void main() {\n  final engine = Engine();\n  final rules = engine.container.get<ValidationRuleRegistry>();\n  rules.register(() => PasswordStrengthRule());\n  rules.register(() => CreditCardRule());\n  rules.register(() => PhoneNumberRule());\n  // ... rest of setup\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"usage-in-validation",children:"Usage in Validation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"router.post('/register', (ctx) async {\n  await ctx.validate({\n    'username': 'required|string|min:3',\n    'password': 'required|strong_password',\n    'phone': 'required|phone',\n    'credit_card': 'required|credit_card'\n  });\n  \n  // Process valid registration...\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"rules-with-options",children:"Rules with Options"}),"\n",(0,r.jsx)(n.p,{children:"You can create rules that accept options for more flexible validation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dart",children:"class EnumRule implements ValidationRule {\n  @override\n  String get name => 'enum';\n\n  @override\n  String message(dynamic value, [List<String>? options]) =>\n      'Value must be one of the allowed values';\n\n  @override\n  bool validate(dynamic value, [List<String>? options]) {\n    if (value == null || options == null) return false;\n    return options.contains(value.toString());\n  }\n}\n\n// Usage:\nawait ctx.validate({\n  'status': 'required|enum:pending,active,completed'\n});\n"})})]})}function c(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>l});var t=i(6540);const r={},a=t.createContext(r);function s(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);