"use strict";(self.webpackChunkrouted=self.webpackChunkrouted||[]).push([[1459],{3560:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"server-testing/cli","title":"CLI","description":"Manage browser bundles, WebDriver binaries, and test scaffolding","source":"@site/docs/server-testing/cli.mdx","sourceDirName":"server-testing","slug":"/server-testing/cli","permalink":"/docs/server-testing/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/server-testing/cli.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"CLI","description":"Manage browser bundles, WebDriver binaries, and test scaffolding","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Browser Examples","permalink":"/docs/server-testing/examples/browser"},"next":{"title":"TestClient","permalink":"/docs/server-testing/test-client"}}');var t=s(4848),i=s(8453);const a={title:"CLI",description:"Manage browser bundles, WebDriver binaries, and test scaffolding",sidebar_position:7},l="CLI",d={},o=[{value:"Install Browser Bundles",id:"install-browser-bundles",level:2},{value:"Install Driver Servers",id:"install-driver-servers",level:2},{value:"Bootstrap a Project",id:"bootstrap-a-project",level:2},{value:"Generate Test Files",id:"generate-test-files",level:2},{value:"CI Tips",id:"ci-tips",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"cli",children:"CLI"})}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"server_testing"})," CLI ships with the package and helps prepare the local environment for browser automation. Run commands with:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run server_testing <command> [args]\n"})}),"\n",(0,t.jsx)(r.h2,{id:"install-browser-bundles",children:"Install Browser Bundles"}),"\n",(0,t.jsxs)(r.p,{children:["Download and cache Playwright-style browser builds referenced by ",(0,t.jsx)(r.code,{children:"browsers.json"}),". By default the command installs the browsers flagged with ",(0,t.jsx)(r.code,{children:'"installByDefault": true'}),"."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run server_testing install               # install defaults (e.g. firefox)\ndart run server_testing install chromium      # explicit target\ndart run server_testing install chromium -f   # force re-download\ndart run server_testing install firefox --force\n"})}),"\n",(0,t.jsxs)(r.p,{children:["Bundles are stored under ",(0,t.jsx)(r.code,{children:"~/.server_testing"})," by default (override with ",(0,t.jsx)(r.code,{children:"SERVER_TESTING_CACHE_DIR"}),")."]}),"\n",(0,t.jsx)(r.h2,{id:"install-driver-servers",children:"Install Driver Servers"}),"\n",(0,t.jsx)(r.p,{children:"Ensure the matching WebDriver binary (e.g. GeckoDriver, ChromeDriver) is present and ready to launch."}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run server_testing install:driver firefox\ndart run server_testing install:driver chrome --force\n"})}),"\n",(0,t.jsx)(r.p,{children:"The command downloads the driver and starts it on demand at runtime; forcing a reinstall removes the cached binary first."}),"\n",(0,t.jsx)(r.h2,{id:"bootstrap-a-project",children:"Bootstrap a Project"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"init"})," sets up a conventional folder layout and example tests:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run server_testing init\n"})}),"\n",(0,t.jsx)(r.p,{children:"This command:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Creates ",(0,t.jsx)(r.code,{children:"test/http/"})," and ",(0,t.jsx)(r.code,{children:"test/browser/"})," directories (if missing)"]}),"\n",(0,t.jsx)(r.li,{children:"Writes sample HTTP and browser test files"}),"\n",(0,t.jsxs)(r.li,{children:["Generates a minimal ",(0,t.jsx)(r.code,{children:"browsers.json"})]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"generate-test-files",children:"Generate Test Files"}),"\n",(0,t.jsx)(r.p,{children:"Create new stubs that follow the recommended structure:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"dart run server_testing create:http users_api\ndart run server_testing create:browser home_page\n"})}),"\n",(0,t.jsxs)(r.p,{children:["Both commands write a ",(0,t.jsx)(r.code,{children:"<name>_test.dart"})," inside the appropriate directory. Use these as a starting point for larger suites."]}),"\n",(0,t.jsx)(r.h2,{id:"ci-tips",children:"CI Tips"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Cache ",(0,t.jsx)(r.code,{children:"~/.cache/server_testing"})," (browser bundles) and your driver directory between runs to avoid repeated downloads."]}),"\n",(0,t.jsxs)(r.li,{children:["Install browsers and drivers during the build step (",(0,t.jsx)(r.code,{children:"dart run server_testing install"})," and ",(0,t.jsx)(r.code,{children:"install:driver"}),") so test jobs can start immediately."]}),"\n",(0,t.jsx)(r.li,{children:"If running in a container with limited permissions, point the cache directories to a writable location via environment variables before calling the CLI."}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>l});var n=s(6540);const t={},i=n.createContext(t);function a(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);