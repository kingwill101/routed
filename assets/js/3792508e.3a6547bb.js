"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[5930],{585:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"logging","title":"Logging","description":"Structured logging and request metadata","source":"@site/docs/routed/logging.mdx","sourceDirName":".","slug":"/logging","permalink":"/docs/routed/logging","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/routed/logging.mdx","tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"title":"Logging","description":"Structured logging and request metadata","sidebar_position":23},"sidebar":"routedSidebar","previous":{"title":"Uploads","permalink":"/docs/routed/uploads"},"next":{"title":"Observability","permalink":"/docs/routed/observability"}}');var r=i(4848),s=i(8453);const o={title:"Logging",description:"Structured logging and request metadata",sidebar_position:23},l="Logging",d={},a=[{value:"Configuration",id:"configuration",level:2},{value:"Channel drivers",id:"channel-drivers",level:2},{value:"Behavior",id:"behavior",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"logging",children:"Logging"})}),"\n",(0,r.jsx)(n.p,{children:"The logging provider instruments requests and emits structured logs. Configure log level, request header capture, and channel drivers via the manifest."}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="config/logging.yaml"',children:"logging:\n  enabled: true\n  level: info\n  errors_only: false\n  format: pretty\n  request_headers:\n    - user-agent\n    - x-request-id\n  extra_fields:\n    service: api\n  default: stacked\n  channels:\n    stacked:\n      driver: stack\n      channels: [console, daily]\n    console:\n      driver: single\n      path: storage/logs/routed.log\n    daily:\n      driver: daily\n      path: storage/logs/routed.log\n      retention_days: 14\n"})}),"\n",(0,r.jsx)(n.h2,{id:"channel-drivers",children:"Channel drivers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"single"}),": writes to one file."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"daily"}),": rotates and keeps ",(0,r.jsx)(n.code,{children:"retention_days"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stack"}),": multiplexes multiple channels."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"webhook"}),": posts structured logs to an HTTP endpoint."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"sampling"}),": rate-limits logs by level."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"behavior",children:"Behavior"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Middleware ID: ",(0,r.jsx)(n.code,{children:"routed.logging.http"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"errors_only"})," logs only failed requests."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"request_headers"})," captures selected headers into the log context."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/routed/fundamentals/logging",children:"Fundamentals: Logging"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/routed/fundamentals/configuration#logging-configuration",children:"Configuration: Logging"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var t=i(6540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);