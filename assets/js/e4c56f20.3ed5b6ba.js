"use strict";(globalThis.webpackChunkrouted=globalThis.webpackChunkrouted||[]).push([[498],{7602:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"getting-started","title":"Getting Started","description":"Install","source":"@site/docs/property-testing/getting-started.mdx","sourceDirName":".","slug":"/getting-started","permalink":"/docs/property_testing/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/routed/tree/main/docs/docs/property-testing/getting-started.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Getting Started","sidebar_position":2},"sidebar":"propertyTestingSidebar","previous":{"title":"Property Testing Overview","permalink":"/docs/property_testing/intro"},"next":{"title":"Core Generators","permalink":"/docs/property_testing/generators"}}');var s=t(4848),i=t(8453);const o={title:"Getting Started",sidebar_position:2},a=void 0,d={},l=[{value:"Install",id:"install",level:2},{value:"Your first property",id:"your-first-property",level:2},{value:"Asynchronous properties and timeouts",id:"asynchronous-properties-and-timeouts",level:2},{value:"Re-running a failing seed",id:"re-running-a-failing-seed",level:2},{value:"When to stop shrinking?",id:"when-to-stop-shrinking",level:2}];function c(e){const n={code:"code",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"install",children:"Install"}),"\n",(0,s.jsxs)(n.p,{children:["Add the package to your ",(0,s.jsx)(n.code,{children:"dev_dependencies"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"dev_dependencies:\n  property_testing: ^0.3.0\n  test: ^1.25.0\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then import everything from the umbrella library:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"import 'package:property_testing/property_testing.dart';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"your-first-property",children:"Your first property"}),"\n",(0,s.jsxs)(n.p,{children:["Wrap the runner inside a ",(0,s.jsx)(n.code,{children:"package:test"})," case so failures get reported like any other test:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"test('addition is commutative', () async {\n  final runner = PropertyTestRunner(\n    Gen.integer().list(minLength: 2, maxLength: 2),\n    (pair) {\n      expect(pair[0] + pair[1], equals(pair[1] + pair[0]));\n    },\n    PropertyConfig(\n      numTests: 400, // more coverage than a hand-written handful\n      seed: 20240115, // keep failing seeds to reproduce\n    ),\n  );\n\n  final result = await runner.run();\n  expect(result.success, isTrue, reason: result.report);\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"PropertyTestRunner"})," executes the property ",(0,s.jsx)(n.code,{children:"numTests"})," times, shrinking any failure before returning a ",(0,s.jsx)(n.code,{children:"PropertyResult"}),". Passing the ",(0,s.jsx)(n.code,{children:"report"})," into ",(0,s.jsx)(n.code,{children:"expect"})," ensures the minimal counterexample, error, and stack trace are printed if the property breaks."]}),"\n",(0,s.jsx)(n.h2,{id:"asynchronous-properties-and-timeouts",children:"Asynchronous properties and timeouts"}),"\n",(0,s.jsxs)(n.p,{children:["The runner accepts property functions that return ",(0,s.jsx)(n.code,{children:"Future<void>"}),"\u2014ideal for exercising HTTP handlers, database calls, or any async logic. Use ",(0,s.jsx)(n.code,{children:"PropertyConfig.timeout"})," to guard long-running cases:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-dart",children:"test('API never returns 5xx for valid payloads', () async {\n  final runner = PropertyTestRunner(\n    Gen.string(maxLength: 128),\n    (payload) async {\n      final response = await client.post('/api/data', body: payload);\n      expect(response.statusCode, lessThan(500));\n    },\n    PropertyConfig(\n      numTests: 250,\n      timeout: const Duration(seconds: 2), // per-case timeout\n    ),\n  );\n\n  final result = await runner.run();\n  expect(result.success, isTrue, reason: result.report);\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:"If a single invocation exceeds the timeout or throws, the runner captures the error, shrinks the input, and returns immediately with the failing example."}),"\n",(0,s.jsx)(n.h2,{id:"re-running-a-failing-seed",children:"Re-running a failing seed"}),"\n",(0,s.jsx)(n.p,{children:"When a property fails, note the reported seed to reproduce the sequence:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-txt",children:"\u2717 Property test failed\n  Failed after 37 test cases\n  Seed: 20240115\n  ...\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Reuse that seed in the ",(0,s.jsx)(n.code,{children:"PropertyConfig"})," to replay the same inputs while you debug. If you supply your own ",(0,s.jsx)(n.code,{children:"Random"})," instance via ",(0,s.jsx)(n.code,{children:"PropertyConfig(random: Random(...))"}),", you are responsible for preserving it to reproduce the run."]}),"\n",(0,s.jsx)(n.h2,{id:"when-to-stop-shrinking",children:"When to stop shrinking?"}),"\n",(0,s.jsxs)(n.p,{children:["The default ",(0,s.jsx)(n.code,{children:"maxShrinks"})," (100) works well for most use-cases. Increase it if you have deeply nested structures or long command sequences, or decrease it to speed up debugging when the full shrinking search is too costly."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);