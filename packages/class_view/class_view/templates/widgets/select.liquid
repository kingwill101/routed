<select name="{{ widget.name }}"{% for name, value in widget.attrs %}{% if value != false %} {{ name }}{% if value != true %}="{{ value }}"{% endif %}{% endif %}{% endfor %}>{% for group_name, group_choices, group_index in widget.optgroups %}{% if group_name %}
<optgroup label="{{ group_name }}">{% endif %}{% for option in group_choices %}
    {% render option.template_name, widget: option %}{% endfor %}{% if group_name %}
    </optgroup>{% endif %}{% endfor %}
</select> 