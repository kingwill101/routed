{% if errors %}
    <li>
        {{ errors }}
        {% if not fields %}
            {% for field in hidden_fields -%}
                {{- field -}}
            {%- endfor %}
        {% endif %}
    </li>
{% endif %}
{% for item in fields %}
    {% assign field = item.field %}
    {% assign field_errors = item.errors %}
    <li
            {% assign classes = field.css_classes -%}
            {% if classes %}
                class="{{ classes }}"
            {% endif %}
    >
        {{ field.errors_html }}
        {% if field.label %}{{ field.label_tag }}{% endif %}
        {{ field }}
        {% if field.help_text %}
            <span
                    class="helptext"
        {% if field.auto_id %}
            id="{{ field.auto_id }}_helptext"
        {% endif %}
      >
        {{- field.help_text -}}
      </span>
        {% endif %}
        {% if forloop.last %}
            {% for field in hidden_fields -%}
                {{- field -}}
            {%- endfor %}
        {% endif %}
    </li>
{% endfor %}
{% if not fields and not errors %}
    {% for field in hidden_fields -%}
        {{- field -}}
    {%- endfor %}
{% endif %}
