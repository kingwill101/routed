<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>SimpleBlog - Class View Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #4a5568;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .section {
            margin: 2rem 0;
        }

        .endpoint {
            background: #f7fafc;
            border-left: 4px solid #4299e1;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .method {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
            color: white;
            margin-right: 1rem;
            min-width: 60px;
            text-align: center;
        }

        .get {
            background: #48bb78;
        }

        .post {
            background: #ed8936;
        }

        .put {
            background: #4299e1;
        }

        .delete {
            background: #f56565;
        }

        .try-button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 1rem;
        }

        .try-button:hover {
            background: #3182ce;
        }

        .feature {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            padding: 1rem;
            background: #f7fafc;
            border-radius: 6px;
        }

        .feature-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
        }

        .code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>SimpleBlog</h1>
    <p class="subtitle">A demonstration of class_view features with Dart & Shelf</p>

    <div class="section">
        <h2>üéØ Features Demonstrated</h2>
        <div class="feature">
            <span class="feature-icon">‚úÖ</span>
            <div>
                <strong>Full CRUD Operations</strong><br>
                Complete Create, Read, Update, Delete using class_view
            </div>
        </div>
        <div class="feature">
            <span class="feature-icon">üèóÔ∏è</span>
            <div>
                <strong>Django-style Views</strong><br>
                Clean, composable views with mixins
            </div>
        </div>
        <div class="feature">
            <span class="feature-icon">üîç</span>
            <div>
                <strong>Search & Pagination</strong><br>
                Built-in search functionality with efficient pagination
            </div>
        </div>
        <div class="feature">
            <span class="feature-icon">üìù</span>
            <div>
                <strong>Form Validation</strong><br>
                Robust form handling with validation
            </div>
        </div>
        <div class="feature">
            <span class="feature-icon">üåê</span>
            <div>
                <strong>RESTful API</strong><br>
                JSON API endpoints that work seamlessly
            </div>
        </div>
    </div>

    <div class="section">
        <h2>üöÄ API Endpoints</h2>

        <div class="endpoint">
            <span class="method get">GET</span> <strong>/api/posts</strong>
            <button class="try-button" onclick="tryEndpoint('/api/posts')">Try It</button>
            <p>List all blog posts with pagination and search</p>
        </div>

        <div class="endpoint">
            <span class="method post">POST</span> <strong>/api/posts</strong>
            <button class="try-button" onclick="createPost()">Try It</button>
            <p>Create a new blog post</p>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span> <strong>/api/posts/{slug}</strong>
            <button class="try-button" onclick="tryEndpoint('/api/posts/welcome-to-simpleblog')">Try It</button>
            <p>Get a specific post by slug</p>
        </div>

        <div class="endpoint">
            <span class="method get">GET</span> <strong>/</strong>
            <button class="try-button" onclick="tryEndpoint('/')">Try It</button>
            <p>Home page with dashboard information</p>
        </div>
    </div>

    <div class="section">
        <h2>üíª Quick Test</h2>
        <p>Try these curl commands:</p>

        <div class="code">
            # List all posts
            curl http://localhost:8080/api/posts

            # Get a specific post
            curl http://localhost:8080/api/posts/welcome-to-simpleblog

            # Create a new post
            curl -X POST http://localhost:8080/api/posts \
            -H "Content-Type: application/json" \
            -d '{
            "title": "My New Post",
            "content": "# Hello World\n\nThis is my first post!",
            "author": "Me",
            "isPublished": true,
            "tags": "test,demo"
            }'

            # Search posts
            curl http://localhost:8080/api/posts?search=class-view
        </div>
    </div>

    <div class="section">
        <h2>üìö Learn More</h2>
        <p>This SimpleBlog demonstrates the power of the <strong>class_view</strong> framework for Dart web development:
        </p>
        <ul>
            <li><strong>ListView</strong> - Paginated list views with search</li>
            <li><strong>DetailView</strong> - Individual item display</li>
            <li><strong>CreateView</strong> - Object creation with validation</li>
            <li><strong>UpdateView</strong> - Object editing</li>
            <li><strong>DeleteView</strong> - Safe object deletion</li>
            <li><strong>Mixins</strong> - Composable functionality</li>
            <li><strong>Form Handling</strong> - Type-safe form processing</li>
        </ul>
    </div>

    <div id="response" style="margin-top: 2rem;"></div>
</div>

<script>
    async function tryEndpoint(path) {
        const responseDiv = document.getElementById('response');
        responseDiv.innerHTML = '<p>Loading...</p>';

        try {
            const response = await fetch(path, {
                headers: {
                    'Accept': 'application/json'
                }
            });
            const data = await response.json();

            responseDiv.innerHTML = `
                    <h3>Response from ${path}:</h3>
                    <div class="code">${JSON.stringify(data, null, 2)}</div>
                `;
        } catch (error) {
            responseDiv.innerHTML = `
                    <h3>Error:</h3>
                    <div class="code" style="background: #742a2a; color: #fed7d7;">
                        ${error.message}
                    </div>
                `;
        }
    }

    async function createPost() {
        const responseDiv = document.getElementById('response');
        responseDiv.innerHTML = '<p>Creating post...</p>';

        const postData = {
            title: `Test Post ${Date.now()}`,
            content: '# Test Post\n\nThis is a test post created from the demo page.',
            author: 'Demo User',
            isPublished: true,
            tags: 'demo,test'
        };

        try {
            const response = await fetch('/api/posts', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(postData)
            });

            const data = await response.json();

            responseDiv.innerHTML = `
                    <h3>Post Created Successfully!</h3>
                    <div class="code">${JSON.stringify(data, null, 2)}</div>
                `;
        } catch (error) {
            responseDiv.innerHTML = `
                    <h3>Error creating post:</h3>
                    <div class="code" style="background: #742a2a; color: #fed7d7;">
                        ${error.message}
                    </div>
                `;
        }
    }
</script>
</body>
</html> 