{% layout 'base/layout' %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">
            {{ page_title }}
        </h1>
        <p class="text-gray-600">
            {{ page_description }}
        </p>
    </div>

    <!-- Form using proper Form rendering -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
        <!-- Form Header -->
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 px-8 py-6 border-b border-gray-100">
            <h2 class="text-xl font-semibold text-gray-800 mb-2">Post Details</h2>
            <p class="text-gray-600 text-sm">Fill in the information below to create your post</p>
        </div>

        <div class="p-8">
            <form method="post" class="space-y-0">
                <!-- Render form using asP() method -->
                {{ form_html }}

                <!-- Form Actions -->
                <div class="flex justify-between items-center pt-8 mt-8 border-t border-gray-200">
                    <a href="/posts"
                       class="inline-flex items-center text-gray-600 hover:text-gray-800 transition-colors group">
                        <svg class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform" fill="none"
                             stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Back to Posts
                    </a>

                    <div class="flex gap-3">
                        <button
                                type="submit"
                                name="draft"
                                value="true"
                                class="inline-flex items-center bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium shadow-sm hover:shadow"
                        >
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Save Draft
                        </button>
                        <button
                                type="submit"
                                class="inline-flex items-center bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:-translate-y-0.5"
                        >
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                {% if post.id %}
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                                {% else %}
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                                {% endif %}
                            </svg>
                            {% if post.id %}
                                Update Post
                            {% else %}
                                Create Post
                            {% endif %}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Error Display -->
    {% if error %}
        <div class="mt-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md">
            <strong>Error:</strong> {{ error }}
        </div>
    {% endif %}
</div>

<style>
    /* Clean, minimal form styling */
    form p {
        margin-bottom: 2rem;
        position: relative;
    }

    form label {
        display: block;
        font-size: 0.875rem;
        font-weight: 600;
        color: #374151;
        margin-bottom: 0.5rem;
    }

    /* Help text styling */
    form p span {
        display: block;
        font-size: 0.875rem;
        color: #6b7280;
        margin-top: 0.5rem;
        font-style: italic;
    }

    /* Checkbox container styling */
    form p:has(input[type="checkbox"]) {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 1rem;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
    }

    form p:has(input[type="checkbox"]) label {
        margin-bottom: 0;
        flex: 1;
        font-weight: 500;
        cursor: pointer;
        line-height: 1.5;
    }

    /* Field type indicators - subtle icons */
    form p:has(input[name="title"])::before {
        content: "üìù";
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1rem;
        opacity: 0.4;
    }

    form p:has(input[name="author"])::before {
        content: "üë§";
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1rem;
        opacity: 0.4;
    }

    form p:has(input[name="slug"])::before {
        content: "üîó";
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1rem;
        opacity: 0.4;
    }

    form p:has(textarea[name="content"])::before {
        content: "‚úçÔ∏è";
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1rem;
        opacity: 0.4;
    }

    form p:has(input[name="tags"])::before {
        content: "üè∑Ô∏è";
        position: absolute;
        top: 0;
        right: 0;
        font-size: 1rem;
        opacity: 0.4;
    }

    /* Remove default form margins */
    form {
        margin: 0;
    }

    /* Field spacing improvements */
    form p:last-of-type {
        margin-bottom: 0;
    }
</style>
{% endblock %} 