{% comment %}
  Post Card Component
  
  Usage:
    {% render 'components/post_card', post: post %}
    {% render 'components/post_card', post: post, show_actions: true %}
    {% render 'components/post_card', post: post, size: 'large' %}
  
  Parameters:
    - post: The post object to display
    - show_actions: Whether to show edit/delete buttons (default: false)
    - size: 'small', 'medium', or 'large' (default: 'medium')
{% endcomment %}

{% assign show_actions = show_actions | default: false %}
{% assign size = size | default: 'medium' %}

<article class="bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow">
    <div class="p-{% if size == 'large' %}8{% elsif size == 'small' %}4{% else %}6{% endif %}">

        {% capture title_size %}
            {% if size == 'large' %}2{% else %}3{% endif %}
        {% endcapture %}

        <!-- Title -->
        <h{{ title_size }}
                class="{% if size == 'large' %}text-2xl{% elsif size == 'small' %}text-lg{% else %}text-xl{% endif %} font-bold text-gray-900 mb-3">
            <a href="/posts/{{ post.slug }}" class="hover:text-blue-600 transition-colors">
                {{ post.title }}
            </a>
        </h{{ title_size }}>

        <!-- Meta Info -->
        {% render 'components/post_meta', post: post, size: size %}

        <!-- Content Preview -->
        <div class="text-gray-600 mb-4 {% if size == 'small' %}line-clamp-2{% else %}line-clamp-3{% endif %}">
            {% if size == 'large' %}
                {{ post.content | strip_html | truncate: 200 }}
            {% elsif size == 'small' %}
                {{ post.content | strip_html | truncate: 80 }}
            {% else %}
                {{ post.content | strip_html | truncate: 150 }}
            {% endif %}
        </div>

        <!-- Tags -->
        {% if post.tags.size > 0 %}
            <div class="flex flex-wrap gap-2 mb-4">
                {% for tag in post.tags %}
                    <span class="px-2 py-1 {% if size == 'large' %}bg-blue-50 text-blue-600{% else %}bg-gray-100 text-gray-600{% endif %} text-xs rounded-full">
                {% if size == 'large' %}#{% endif %}{{ tag }}
            </span>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Actions -->
        <div class="flex justify-between items-center {% if show_actions %}pt-4 border-t{% endif %}">
            <a href="/posts/{{ post.slug }}"
               class="text-blue-600 hover:text-blue-700 font-medium {% if size == 'small' %}text-sm{% endif %}">
                Read more ‚Üí
            </a>

            {% if show_actions %}
                <div class="flex gap-2">
                    <a href="/posts/{{ post.id }}/edit" class="text-gray-600 hover:text-blue-600 text-sm">
                        ‚úèÔ∏è Edit
                    </a>
                    <button onclick="confirmDelete('{{ post.id }}', '{{ post.title }}')"
                            class="text-gray-600 hover:text-red-600 text-sm">
                        üóëÔ∏è Delete
                    </button>
                </div>
            {% endif %}
        </div>
    </div>
</article> 